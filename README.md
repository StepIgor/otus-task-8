‚ÑπÔ∏è –í Dockerhub –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ tag):

1. **:latest**, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–¥ amd64-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É;
2. **:arm**, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–¥ arm64 (M-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã Apple);
   
–í deploy-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω—ã latest-–≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—Ä–∞–∑–æ–≤.

üßëüèª‚Äçüíª **–ü–æ—Ä—è–¥–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏** (–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è default namespace, –æ–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏ —Å–≤–æ–π).
1. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º PostgreSQL (5 —à—Ç., –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å):
   ```
   helm install authpostgresql bitnami/postgresql -f values/postgresql_values.yaml
   helm install billingpostgresql bitnami/postgresql -f values/postgresql_values.yaml
   helm install orderspostgresql bitnami/postgresql -f values/postgresql_values.yaml
   helm install goodspostgresql bitnami/postgresql -f values/postgresql_values.yaml
   helm install courierpostgresql bitnami/postgresql -f values/postgresql_values.yaml
   ```
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º RabbitMQ:
   ```
   helm install rabbitmq bitnami/rabbitmq -f values/rabbitmq_values.yaml
   ```
3. –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (—Å–µ–∫—Ä–µ—Ç –¥–ª—è –±–∞–∑—ã, –º–∏–≥—Ä–∞—Ü–∏—è, configmap + deploy + service –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É, ingress):
   ```
   kubectl apply -f manifests/
   ```

‚ÑπÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å–∞–≥–∞. –í—Å—ë –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —á–µ—Ä–µ–∑ RabbitMQ.

![diag](diag.png)

**üÜï –û–ë–ù–û–í–õ–ï–ù–û 22.03.2025 –∫ –∑–∞–¥–∞–Ω–∏—é 9.** –°–º. –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–º–∏—Ç–µ [git commit info](https://github.com/StepIgor/otus-task-8/commit/ac07a6d36d7794643d29be3ee2985554dbfd160d):
1. –¢–µ–ø–µ—Ä—å —Å –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å–Ω–∏–º–∞–µ—Ç—Å—è Fingerprint, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –µ–¥–∏–Ω–æ–π –ë–î-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–µ—Ä–≤–∏—Å–∞ Orders. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∑–∞–∫–∞–∑, –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è, –∞ –ª–∏—à—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –≤ —Å—Ç–∞—Ç—É—Å–µ 200 OK (–≤–º–µ—Å—Ç–æ 201 Created).
2. –°–µ—Ä–≤–∏—Å Billing –æ—Ç–Ω—ã–Ω–µ –≤–µ–¥—ë—Ç –∂—É—Ä–Ω–∞–ª —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ –∑–∞–∫–∞–∑–∞–º –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –ë–î, –∫–æ—Ç–æ—Ä–∞—è —Ç–∞–∫ –∂–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –µ–¥–∏–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, –µ—Å–ª–∏ –∏–∑ —à–∏–Ω—ã –ø–æ—Å—Ç—É–ø–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è-–¥—É–±–ª–∏.
3. Auto-–∫–æ–ª–ª–µ–∫—Ü–∏—è Postman –æ–±–Ω–æ–≤–ª–µ–Ω–∞. –ë—ã–ª –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É fingerprint-–ª–æ–≥–∏–∫–∏.

–ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã (–Ω–µ –∏–∑–º–µ–Ω—è–ª—Å—è):
1. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Auth Service) –∑–∞–≤–æ–¥–∏—Ç—Å—è –ø—É—Å—Ç–æ–π —Å—á—ë—Ç (Billing Service, –±–∞–ª–∞–Ω—Å = 0). –ë–∏–ª–ª–∏–Ω–≥ —á–∏—Ç–∞–µ—Ç –∏–∑ –æ—á–µ—Ä–µ–¥–∏ billing_new_account;
2. –ü—Ä–∏ –∑–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Pending (Orders Service);
3. –í Courier Service –±—Ä–æ–Ω–∏—Ä—É–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ –∏ —á–∞—Å —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å courier_new_order;
4. –ï—Å–ª–∏ –¥–∞—Ç–∞ –∏ —á–∞—Å —Å–≤–æ–±–æ–¥–Ω—ã, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å goods_order_creation –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (Goods Service);
5. –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–≤–æ–±–æ–¥–µ–Ω, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å billing_order_creation –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –∑–∞ —Ç–æ–≤–∞—Ä (Billing Service);
6. –ï—Å–ª–∏ –¥–µ–Ω—å–≥–∏ —É—Å–ø–µ—à–Ω–æ —Å–ø–∏—Å–∞–ª–∏—Å—å, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å orders_order_acception –¥–ª—è —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ "accepted" (Orders Service);

–ï—Å–ª–∏ –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —ç—Ç–∞–ø–æ–≤ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫ (–∫—É—Ä—å–µ—Ä —É–∂–µ –∑–∞–Ω—è—Ç –Ω–∞ —ç—Ç–æ—Ç —á–∞—Å, —Ç–æ–≤–∞—Ä –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –¥–µ–Ω–µ–≥ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ), —Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏-–æ—Ç–º–µ–Ω—ã –¥–ª—è —Å–Ω—è—Ç–∏—è –±—Ä–æ–Ω–µ–π –∏ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (–ø–µ—Ä–µ–≤–æ–¥ –≤ "cancelled") –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Å—á—ë—Ç–µ.

‚ÑπÔ∏è –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ collections –¥–≤–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (manual –¥–ª—è "–ø–æ—Ç—ã–∫–∞—Ç—å" –∏ auto –¥–ª—è newman —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ).

–°–ø—Ä–∞–≤–∫–∞ –Ω–∞—Å—á—ë—Ç manual: login-–∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç token, –ø–æ–ª—É—á–∞–µ–º—ã–π –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Ç–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ, –ø–æ —á–∞—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∑–∞–ø—Ä–æ—Å—ã. –ß—Ç–æ–±—ã "–∑–∞–π—Ç–∏" –ø–æ–¥ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–∑–≤–∞—Ç—å login-–∑–∞–ø—Ä–æ—Å —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ name –∏ password. –¢–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –∏ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è = 1 —á–∞—Å).
